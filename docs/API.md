# API REFERENCE

## Authentication

### SignUp

PS: No SignUp for Admin
PS: '\_id' is Id generated by mongodb for that object in this case User or Book

- Parameters

```json
{
  "name": "Dhananjay Tanpure",
  "mail": "email@mail.com",
  "rollno": "18121042",
  "mobile": "9876543210",
  "password": "Password@1234"
}
```

- Responses

  - Success

    ```json
    {
      "_id": "5fcdc3450095ca4771e91342",
      "name": "Dhananjay Tanpure",
      "mail": "email@mail.com",
      "rollno": "18121042",
      "mobile": "9876543210",
      "authToken": "generated authToken"
    }
    ```

  - Success and already borrowed a book

    ```json
    {
      "_id": "5fcdc3450095ca4771e91342",
      "name": "Dhananjay Tanpure",
      "mail": "email@mail.com",
      "rollno": "18121042",
      "mobile": "9876543210",
      "authToken": "generated authToken",
      "book": "book_id"
    }
    ```

  - Email already exists

    ```json
    {
      "code": 409,
      "error": "Email is already taken!"
    }
    ```

  - Internal Server Error

    ```json
    {
      "code": 500,
      "error": "Internal Server Error"
    }
    ```

---

### Log In

- Parameters

```json
{
  "mail": "email@mail.com",
  "password": "Password@1234"
}
```

- Responses

  - Success

    ```json
    {
      "_id": "5fcdc6c644d6ec3c991e5d6e",
      "name": "Dhananjay Tanpure",
      "mail": "email@mail.com",
      "rollno": "18121042",
      "mobile": "9876543210",
      "authToken": "generated authToken"
    }
    ```

  - Success and is Admin

    ```json
    {
      "_id": "5fcdc3450095ca4771e91342",
      "name": "Dhananjay Tanpure",
      "mail": "email@mail.com",
      "rollno": "18121042",
      "mobile": "9876543210",
      "authToken": "generated authToken",
      "isAdmin": true
    }
    ```

  - Success and already borrowed a book

    ```json
    {
      "_id": "5fcdc3450095ca4771e91342",
      "name": "Dhananjay Tanpure",
      "mail": "email@mail.com",
      "rollno": "18121042",
      "mobile": "9876543210",
      "authToken": "generated authToken",
      "book": "book_id"
    }
    ```

  - Incorrect Mail

    ```json
    {
      "code": 404,
      "error": "Sign Up first"
    }
    ```

  - Incorrect Password

    ```json
    {
      "code": 401,
      "error": "Incorrect Password"
    }
    ```

  - Internal Server Error

    ```json
    {
      "code": 500,
      "error": "Internal Server Error"
    }
    ```

---

### Log Out

- Parameters

  - User

  ```json
  {
    "_id": "5fcdad665a42521d4fa9643e"
  }
  ```

  - Admin

  ```json
  {
    "_id": "5fcdad665a42521d4fa9643e",
    "isAdmin": true
  }
  ```

- Responses

  - Success

  ```json
  {
    "code": 205,
    "error": "User logged Out"
  }
  ```

  - Incorrect ID

  ```json
  {
    "code": 404,
    "error": "Log In first"
  }
  ```

  - Internal Server Error

  ```json
  {
    "code": 500,
    "error": "Internal Server Error"
  }
  ```

---

### Get Current User

PS: Not for Admin

- Parameters

```json
{
  "_id": "5fcdc6c644d6ec3c991e5d6e"
}
```

- Responses

  - Success

  ```json
  {
    "_id": "5fcdc6c644d6ec3c991e5d6e",
    "name": "Dhananjay Tanpure",
    "mail": "email@mail.com",
    "rollno": "18121042",
    "mobile": "9876543210",
    "authToken": "generated authToken"
  }
  ```

  - Success and already borrowed a book

  ```json
  {
    "_id": "5fcdc3450095ca4771e91342",
    "name": "Dhananjay Tanpure",
    "mail": "email@mail.com",
    "rollno": "18121042",
    "mobile": "9876543210",
    "authToken": "generated authToken",
    "book": "book_id"
  }
  ```

  - Incorrect ID

  ```json
  {
    "code": 404,
    "error": "Log In First"
  }
  ```

  - Internal Server Error

  ```json
  {
    "code": 500,
    "error": "Internal Server Error"
  }
  ```

---

### Update User

PS: Same for User and Admin

- Parameters

```json
{
  "user": {
    "_id": "5fcf2247787626c6c3f4d327"
  },
  "updateduser": {
    "_id": "5fd4431bbd826710854ebf02",
    "name": "Dhananjay Tanpure",
    "mail": "email3@mail.com",
    "rollno": "49328809",
    "mobile": "98021328795847387595798574"
  }
}
```

- Responses

  - Success

  ```json
  {
    "code": 205,
    "error": "User Updated"
  }
  ```

  - Wrong User

  ```json
  {
    "code": 404,
    "error": "Log In first"
  }
  ```

---

### Delete User

PS: Same for User and Admin

- Parameters

```json
{
  "admin": "5fd44cfebd826710854ebf03",
  "user": "5fd44cfebd826710854ebf03"
}
```

- Responses

  - Success

  ```json
  {
    "code": 205,
    "error": "User deleted"
  }
  ```

  - Wrong User

  ```json
  {
    "code": 404,
    "error": "Log In first"
  }
  ```

---

## Books

This section is for operations related Books

### Get Books

- Parameters
  - None
- Response

  - List of all books in Database

  ```json
  {
    "code": 200,
    # This is List of Books
    "books": [
      {
        "_id": "5fcfa04c8050cbae20ac8706",
        "title": "Book 2",
        "author": "Dhananjay Tanpure",
        "pages": "200",
        "price": "200",
        "pub": "Another publication",
        "isbn": "9876543210",
        "genre": "Romance",
        "imageLink": "https://imgur.co/1"
      },
      {
        "_id": "5fcfa09b8050cbae20ac8707",
        "title": "Book 3",
        "author": "Dhananjay Tanpure",
        "pages": "200",
        "price": "200",
        "pub": "Another publication",
        "isbn": "9876543210",
        "genre": "Romance",
        "imageLink": "https://imgur.co/1"
      },
      {
        "_id": "5fcfa1458050cbae20ac8708",
        "title": "Book 4",
        "author": "Dhananjay Tanpure",
        "pages": "200",
        "price": "200",
        "pub": "Another publication",
        "isbn": "9876543210",
        "genre": "Romance",
        "imageLink": "https://imgur.co/1"
      }
    ]
  }
  ```

---

### User Borrow Book

- Parameters

  ```json
  {
    "type": "borrow",
    "user": {
      "_id": "5fd784d4b7610e7d952189c0"
    },
    "book": {
      "_id": "5fcfa04c8050cbae20ac8706"
    }
  }
  ```

- Response

  - Success

  ```json
  {
    "code": 200,
    "error": "You get the book"
  }
  ```

  - Already have taken a book

  ```json
  {
    "code": 403,
    "error": "You have taken a book!"
  }
  ```

  - Book does not exist

  ```json
  {
    "code": 404,
    "error": "Book does not exist"
  }
  ```

  - Wrong Details

  ```json
  {
    "code": 404,
    "error": "Log In First"
  }
  ```

---

### User Submit Book

- Parameters

  ```json
  {
    "type": "submit",
    "user": {
      "_id": "5fd784d4b7610e7d952189c0"
    },
    "book": {
      "_id": "5fcfa04c8050cbae20ac8706"
    }
  }
  ```

- Response

  - Success

  ```json
  {
    "code": 200,
    "error": "Book Submitted"
  }
  ```

  - Not Borrowed a book

  ```json
  {
    "code": 404,
    "error": "Borrow the book first"
  }
  ```

  - Wrong Details but existing User

  ```json
  {
    "code": 404,
    "error": "Log In First"
  }
  ```

  - Wrong Details but non-existing User

  ```json
  {
    "code": 404,
    "error": "Sign Up First"
  }
  ```

---

### Set Book

- Parameters

  ```json
  {
    "type": "save",
    "book": {
      "title": "Book 4",
      "author": "Dhananjay Tanpure",
      "pages": "200",
      "price": "200",
      "pub": "Another publication",
      "isbn": "9876543210",
      "genre": "Romance",
      "imageLink": "https://imgur.co/1"
    },
    "admin": {
      "_id": "5fcf2247787626c6c3f4d327"
    }
  }
  ```

- Response

  - Success

  ```json
  {
    "code": 201,
    "error": "Book created!",
    "book": {
      "title": "Book 4",
      "author": "Dhananjay Tanpure",
      "pages": "200",
      "price": "200",
      "pub": "Another publication",
      "isbn": "9876543210",
      "genre": "Romance",
      "imageLink": "https://imgur.co/1",
      "_id": "5fd788f4b7610e7d952189c1"
    }
  }
  ```

  - Wrong Details

  ```json
  {
    "code": 404,
    "error": "Log In First"
  }
  ```

---

### Delete Book

- Parameters

  ```json
  {
    "type": "delete",
    "book": "5fcfa18f883d6fb2d3624b58",
    "admin": "5fcf2247787626c6c3f4d327"
  }
  ```

- Response

  - Success

  ```json
  {
    "code": 201,
    "error": "Book deleted!"
  }
  ```

  - Wrong Details

  ```json
  {
    "code": 404,
    "error": "Log In First"
  }
  ```

  - Wrong Book

  ```json
  {
    "code": 500,
    "error": "Internal Server Error"
  }
  ```

---

## Feedback

Get Response

- Parameters

  ```json
  {
    "title": "Best service i have ever got",
    "decs": "<discription>"
  }
  ```

- Response

  ```json
  {
    "code": "205",
    "error": "Response saved"
  }
  ```
